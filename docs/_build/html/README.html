
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Getting started &#8212; PyHum 1.4.3 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.4.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Modules" href="modules.html" />
    <link rel="prev" title="PyHum: Python program for reading and processing low-cost sidescan sonar data" href="index.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PyHum: Python program for reading and processing low-cost sidescan sonar data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyHum 1.4.3 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="about">
<span id="id2"></span><h2>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h2>
<p>PyHum - a Python framework for reading and processing data from a Humminbird low-cost sidescan sonar</p>
<p>PyHum is an open-source project dedicated to provide a generic Python framework
for reading and exporting data from Humminbird(R) instruments, carrying out rudimentary radiometric corrections to the data,
classify bed texture, and produce some maps on aerial photos and kml files for google-earth</p>
<p>The software is designed to read Humminbird data (.SON, .IDX, and .DAT files) and works on both sidescan and downward-looking echosounder data, where available.</p>
<p>The following Humminbird units are currently supported:
1. 700, 800, 900 and 1100 series
2. ONIX series</p>
</div>
<div class="section" id="technical-info">
<span id="info"></span><h2>Technical Info<a class="headerlink" href="#technical-info" title="Permalink to this headline">¶</a></h2>
<p>Full documentation of the procedures behind the program is in the following publication:</p>
<p>Buscombe, D., 2017, Shallow water benthic imaging and substrate characterization using recreational-grade sidescan-sonar. ENVIRONMENTAL MODELLING &amp; SOFTWARE 89, 1-18.</p>
</div>
<div class="section" id="please-cite">
<span id="cite"></span><h2>Please Cite!<a class="headerlink" href="#please-cite" title="Permalink to this headline">¶</a></h2>
<p>If you use PyHum in your published work, please cite the following papers:</p>
<ol class="arabic simple">
<li>Buscombe, D., Grams, P.E., and Smith, S. (2015) “Automated riverbed sediment classification using low-cost sidescan sonar”, Journal of Hydraulic Engineering, 10.1061/(ASCE)HY.1943-7900.0001079, 06015019.</li>
<li>Buscombe, D., 2017, Shallow water benthic imaging and substrate characterization using recreational-grade sidescan-sonar. ENVIRONMENTAL MODELLING &amp; SOFTWARE 89, 1-18.</li>
</ol>
<p>For the source code visit <a class="reference external" href="https://github.com/dbuscombe-usgs/PyHum/">the project github site</a></p>
</div>
<div class="section" id="credits">
<span id="id3"></span><h2>Credits<a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Primary Developer |    Daniel Buscombe
—— | —————</p>
<blockquote>
<div><div class="line-block">
<div class="line">Northern Arizona University
| Flagstaff, AZ 86001
| <a class="reference external" href="mailto:daniel&#46;buscombe&#37;&#52;&#48;nau&#46;edu">daniel<span>&#46;</span>buscombe<span>&#64;</span>nau<span>&#46;</span>edu</a></div>
</div>
</div></blockquote>
<p>Co-Developer |    Daniel Hamill
—— | —————</p>
<blockquote>
<div><div class="line-block">
<div class="line">Department of Watershed Sciences
| Utah State University
| Logan, UT 84322
| <a class="reference external" href="mailto:dhamill&#37;&#52;&#48;usgs&#46;gov">dhamill<span>&#64;</span>usgs<span>&#46;</span>gov</a></div>
</div>
</div></blockquote>
</div></blockquote>
<p>Version: 1.4.3    |  Revision: Jan, 2018</p>
</div>
<div class="section" id="notes">
<span id="id4"></span><h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>This software has been tested with Python 2.7 on Linux Fedora 16 &amp; 20, Ubuntu 12 – 17, Windows 7. Python 3 is not yet supported</li>
<li>This software has (so far) been used only with Humminbird 798, 898, 998, 1198, 1199 and ONIX series instruments.</li>
<li>PyHum is not yet compatable with newer HELIX/MEGA systems</li>
</ol>
</div>
<div class="section" id="license">
<span id="id5"></span><h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This software is in the public domain because it contains materials that
originally came from the United States Geological Survey, an agency of the
United States Department of Interior. For more information,
see <a class="reference external" href="http://www.usgs.gov/visual-id/credit_usgs.html#copyright">the official USGS copyright policy</a></p>
<p>Any use of trade, product, or firm names is for descriptive purposes only
and does not imply endorsement by the U.S. government.</p>
<p>This software is issued under the <a class="reference external" href="http://www.gnu.org/copyleft/lesser.html">GNU Lesser General Public License, Version 3</a></p>
<p>Thanks to Barb Fagetter (<a class="reference external" href="mailto:blueseas&#37;&#52;&#48;oceanecology&#46;ca">blueseas<span>&#64;</span>oceanecology<span>&#46;</span>ca</a>) for some format info and Paul Anderson (Quest Geophysical Asia) for debugging and suggestions for improvements</p>
</div>
<div class="section" id="installation">
<span id="setup"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Installing in a conda virtual env (recommended)</p>
<p>In a conda (miniconda/anaconda) python 2 environment:</p>
<p>Linux:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">pyhum</span> <span class="n">python</span><span class="o">=</span><span class="mi">2</span>
<span class="n">source</span> <span class="n">activate</span> <span class="n">pyhum</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">basemap</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">hires</span> <span class="o">-</span><span class="n">y</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">scipy</span> <span class="n">numpy</span> <span class="n">scikit</span><span class="o">-</span><span class="n">image</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">simplekml</span> <span class="n">sklearn</span> <span class="n">pandas</span> <span class="n">dask</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">joblib</span> <span class="n">toolz</span> <span class="n">cython</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyresample</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">PyHum</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="c1">#(or pip install git+https://github.com/dbuscombe-usgs/PyHum.git --no-deps)</span>
<span class="n">python</span> <span class="o">-</span><span class="n">c</span><span class="s2">&quot;import PyHum;PyHum.dotest()&quot;</span>
</pre></div>
</div>
<p>Windows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">pyhum</span> <span class="n">python</span><span class="o">=</span><span class="mi">2</span>
<span class="n">activate</span> <span class="n">pyhum</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">basemap</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">hires</span> <span class="o">-</span><span class="n">y</span>
<span class="n">conda</span> <span class="n">install</span> <span class="n">scipy</span> <span class="n">numpy</span> <span class="n">scikit</span><span class="o">-</span><span class="n">image</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">simplekml</span> <span class="n">sklearn</span> <span class="n">pandas</span> <span class="n">dask</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">joblib</span> <span class="n">toolz</span> <span class="n">cython</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pyresample</span><span class="o">==</span><span class="mf">1.1</span><span class="o">.</span><span class="mi">4</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">PyHum</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="c1">#(or pip install git+https://github.com/dbuscombe-usgs/PyHum.git --no-deps)</span>
<span class="n">python</span> <span class="o">-</span><span class="n">c</span><span class="s2">&quot;import PyHum;PyHum.dotest()&quot;</span>
</pre></div>
</div>
<p>Installing as a library accessible outside of virtual env</p>
<p>From PyPI:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">PyHum</span>
</pre></div>
</div>
<p>The latest ‘bleeding edge’ (pre-release) version directly from github:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">dbuscombe</span><span class="o">-</span><span class="n">usgs</span><span class="o">/</span><span class="n">PyHum</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>(Windows users) install git from here: <a class="reference external" href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p>
<p>From github repo clone:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">dbuscombe</span><span class="o">-</span><span class="n">usgs</span><span class="o">/</span><span class="n">PyHum</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">PyHum</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>A local installation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>If you get C++ compiler errors (such as “Unable to find vcvarsall.bat”), you will need to install the Microsoft Visual C++ compiler from <a class="reference external" href="http://aka.ms/vcpython27">here</a></p>
</div>
<div class="section" id="installation-on-amazon-linux-ec-2-instance">
<h2>Installation on Amazon Linux EC-2 instance<a class="headerlink" href="#installation-on-amazon-linux-ec-2-instance" title="Permalink to this headline">¶</a></h2>
<p>It’s best to install numpy, scipy, cython and matplotlib through the OS package manager:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">gcc</span> <span class="n">gcc</span><span class="o">-</span><span class="n">c</span><span class="o">++</span>
<span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">python27</span><span class="o">-</span><span class="n">numpy</span> <span class="n">python27</span><span class="o">-</span><span class="n">Cython</span> <span class="n">python27</span><span class="o">-</span><span class="n">scipy</span> <span class="n">python27</span><span class="o">-</span><span class="n">matplotlib</span>
</pre></div>
</div>
<p>Then install geos libraries using yum and Basemap using pip:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">geos</span> <span class="n">geos</span><span class="o">-</span><span class="n">devel</span> <span class="n">geos</span><span class="o">-</span><span class="n">python27</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">basemap</span> <span class="o">--</span><span class="n">allow</span><span class="o">-</span><span class="n">external</span> <span class="n">basemap</span> <span class="o">--</span><span class="n">allow</span><span class="o">-</span><span class="n">unverified</span> <span class="n">basemap</span>
</pre></div>
</div>
<p>Then PyHum using pip (which will install Pillow, pyproj, simplekml, joblib and scikit-learn):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">PyHum</span>
</pre></div>
</div>
</div>
<div class="section" id="test">
<span id="id6"></span><h2>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h2>
<p>A test can be carried out by running the supplied script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import PyHum; PyHum.test.dotest()&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-gui">
<span id="gui"></span><h2>Using the GUI<a class="headerlink" href="#using-the-gui" title="Permalink to this headline">¶</a></h2>
<p>From the command line (terminal):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import PyHum; PyHum.gui()&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="gettingstarted">
<span id="id7"></span><h2>Getting Started<a class="headerlink" href="#gettingstarted" title="Permalink to this headline">¶</a></h2>
<p>Inputs to the program are a .DAT file (e.g. R0089.DAT) and a folder of .SON and .IDX files (e.g. /my/folder/R0089). The program will read the .SON files with or without the accompanying .IDX files, but will be faster if the .IDX files are present.</p>
<p>PyHum is modular so can be called from within a python or ipython console, from an IDE (such as IDLE or Spyder), or by running a script.</p>
<p>The following example script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">getopt</span>

<span class="kn">from</span> <span class="nn">Tkinter</span> <span class="k">import</span> <span class="n">Tk</span>
<span class="kn">from</span> <span class="nn">tkFileDialog</span> <span class="k">import</span> <span class="n">askopenfilename</span><span class="p">,</span> <span class="n">askdirectory</span>

<span class="kn">import</span> <span class="nn">PyHum</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

 <span class="n">argv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
 <span class="n">humfile</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="n">sonpath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

 <span class="c1"># parse inputs to variables</span>
 <span class="k">try</span><span class="p">:</span>
    <span class="n">opts</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">getopt</span><span class="o">.</span><span class="n">getopt</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span><span class="s2">&quot;hi:s:&quot;</span><span class="p">)</span>
 <span class="k">except</span> <span class="n">getopt</span><span class="o">.</span><span class="n">GetoptError</span><span class="p">:</span>
      <span class="nb">print</span> <span class="s1">&#39;error&#39;</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
 <span class="k">for</span> <span class="n">opt</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">opt</span> <span class="o">==</span> <span class="s1">&#39;-h&#39;</span><span class="p">:</span>
      <span class="nb">print</span> <span class="s1">&#39;help&#39;</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">):</span>
       <span class="n">humfile</span> <span class="o">=</span> <span class="n">arg</span>
    <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;-s&quot;</span><span class="p">):</span>
       <span class="n">sonpath</span> <span class="o">=</span> <span class="n">arg</span>

 <span class="c1"># prompt user to supply file if no input file given</span>
 <span class="k">if</span> <span class="ow">not</span> <span class="n">humfile</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s1">&#39;An input file is required!!!!!!&#39;</span>
    <span class="n">Tk</span><span class="p">()</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span> <span class="c1"># we don&#39;t want a full GUI, so keep the root window from appearing</span>
    <span class="n">humfile</span> <span class="o">=</span> <span class="n">askopenfilename</span><span class="p">(</span><span class="n">filetypes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;DAT files&quot;</span><span class="p">,</span><span class="s2">&quot;*.DAT&quot;</span><span class="p">)])</span>

 <span class="c1"># prompt user to supply directory if no input sonpath is given</span>
 <span class="k">if</span> <span class="ow">not</span> <span class="n">sonpath</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s1">&#39;A *.SON directory is required!!!!!!&#39;</span>
    <span class="n">Tk</span><span class="p">()</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span> <span class="c1"># we don&#39;t want a full GUI, so keep the root window from appearing</span>
    <span class="n">sonpath</span> <span class="o">=</span> <span class="n">askdirectory</span><span class="p">()</span>

 <span class="c1"># print given arguments to screen and convert data type where necessary</span>
 <span class="k">if</span> <span class="n">humfile</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s1">&#39;Input file is </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">humfile</span><span class="p">)</span>

 <span class="k">if</span> <span class="n">sonpath</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s1">&#39;Son files are in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sonpath</span><span class="p">)</span>

 <span class="n">doplot</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#yes</span>

 <span class="c1"># reading specific settings</span>
 <span class="n">cs2cs_args</span> <span class="o">=</span> <span class="s2">&quot;epsg:26949&quot;</span> <span class="c1">#arizona central state plane</span>
 <span class="n">bedpick</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># auto bed pick</span>
 <span class="n">c</span> <span class="o">=</span> <span class="mi">1450</span> <span class="c1"># speed of sound fresh water</span>
 <span class="n">t</span> <span class="o">=</span> <span class="mf">0.108</span> <span class="c1"># length of transducer</span>
 <span class="n">draft</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c1"># draft in metres</span>
 <span class="n">flip_lr</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># flip port and starboard</span>
 <span class="n">model</span> <span class="o">=</span> <span class="mi">998</span> <span class="c1"># humminbird model</span>
 <span class="n">calc_bearing</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#no</span>
 <span class="n">filt_bearing</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#no</span>
 <span class="n">chunk</span> <span class="o">=</span> <span class="s1">&#39;d100&#39;</span> <span class="c1"># distance, 100m</span>
 <span class="c1">#chunk = &#39;p1000&#39; # pings, 1000</span>
 <span class="c1">#chunk = &#39;h10&#39; # heading deviation, 10 deg</span>

 <span class="c1"># correction specific settings</span>
 <span class="n">maxW</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1"># rms output wattage</span>
 <span class="n">dofilt</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># 1 = apply a phase preserving filter (WARNING!! takes a very long time for large scans)</span>
 <span class="n">correct_withwater</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># don&#39;t retain water column in radiometric correction (1 = retains water column for radiomatric corrections)</span>
 <span class="n">ph</span> <span class="o">=</span> <span class="mf">7.0</span> <span class="c1"># acidity on the pH scale</span>
 <span class="n">temp</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="c1"># water temperature in degrees Celsius</span>
 <span class="c1">#salinity = 0.0</span>

 <span class="c1"># for shadow removal</span>
 <span class="n">shadowmask</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#manual shadow removal</span>

 <span class="c1"># for mapping</span>
 <span class="n">res</span> <span class="o">=</span> <span class="mi">99</span> <span class="c1"># grid resolution in metres</span>
 <span class="c1"># if res==99, the program will automatically calc res from the spatial res of the scans</span>
 <span class="n">mode</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># gridding mode (simple nearest neighbour)</span>
 <span class="c1">#mode = 2 # gridding mode (inverse distance weighted nearest neighbour)</span>
 <span class="c1">#mode = 3 # gridding mode (gaussian weighted nearest neighbour)</span>
 <span class="n">dowrite</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#disable writing of point cloud data to file</span>

 <span class="c1">## read data in SON files into PyHum memory mapped format (.dat)</span>
 <span class="n">PyHum</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">humfile</span><span class="p">,</span> <span class="n">sonpath</span><span class="p">,</span> <span class="n">cs2cs_args</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">draft</span><span class="p">,</span> <span class="n">doplot</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">bedpick</span><span class="p">,</span> <span class="n">flip_lr</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">calc_bearing</span><span class="p">,</span> <span class="n">filt_bearing</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span> <span class="c1">#cog</span>

 <span class="c1">## correct scans and remove water column</span>
 <span class="n">PyHum</span><span class="o">.</span><span class="n">correct</span><span class="p">(</span><span class="n">humfile</span><span class="p">,</span> <span class="n">sonpath</span><span class="p">,</span> <span class="n">maxW</span><span class="p">,</span> <span class="n">doplot</span><span class="p">,</span> <span class="n">dofilt</span><span class="p">,</span> <span class="n">correct_withwater</span><span class="p">,</span> <span class="n">ph</span><span class="p">,</span> <span class="n">temp</span><span class="p">,</span> <span class="n">salinity</span><span class="p">)</span>

 <span class="c1">## remove acoustic shadows (caused by distal acoustic attenuation or sound hitting shallows or shoreline)</span>
 <span class="n">PyHum</span><span class="o">.</span><span class="n">rmshadows</span><span class="p">(</span><span class="n">humfile</span><span class="p">,</span> <span class="n">sonpath</span><span class="p">,</span> <span class="n">win</span><span class="p">,</span> <span class="n">shadowmask</span><span class="p">,</span> <span class="n">doplot</span><span class="p">)</span>

 <span class="c1">## Calculate texture lengthscale maps using the method of Buscombe et al. (2015)</span>
 <span class="n">win</span> <span class="o">=</span> <span class="mi">10</span>
 <span class="n">PyHum</span><span class="o">.</span><span class="n">texture2</span><span class="p">(</span><span class="n">humfile</span><span class="p">,</span> <span class="n">sonpath</span><span class="p">,</span> <span class="n">win</span><span class="p">,</span> <span class="n">doplot</span><span class="p">,</span> <span class="n">numclasses</span><span class="p">)</span>

 <span class="c1">## grid and map the scans</span>
 <span class="n">PyHum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">humfile</span><span class="p">,</span> <span class="n">sonpath</span><span class="p">,</span> <span class="n">cs2cs_args</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">nn</span><span class="p">,</span> <span class="n">numstdevs</span><span class="p">,</span> <span class="n">use_uncorrected</span><span class="p">)</span> <span class="c1">#dowrite,</span>
</pre></div>
</div>
<p>could be saved as, for example “proc_mysidescandata.py” and run from the command line using:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">proc_mysidescandata</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">i</span> <span class="n">C</span><span class="p">:</span>\<span class="n">MyData</span>\<span class="n">R0087</span><span class="o">.</span><span class="n">DAT</span> <span class="o">-</span><span class="n">s</span> <span class="n">C</span><span class="p">:</span>\<span class="n">MyData</span>\<span class="n">R0087</span>
</pre></div>
</div>
<p>or from within ipython (with a GUI prompt to navigate to the files):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">run</span> <span class="n">proc_mysidescandata</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If you are in bash (or git bash) you might want to automate through a folder of subfolders like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>for k in $(find $PWD -type d -maxdepth 1 -mindepth 1); do python proc_mysidescandata.py -i &quot;$k/${k##*/}.DAT&quot; -s $k; done
</pre></div>
</div>
<p>which assumes the .DAT file is in the folder with the same root (such as a folder called R00123 which contains SON and IDX files as well as a file called R00123.DAT)</p>
</div>
<div class="section" id="support">
<span id="id8"></span><h2>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>This is a new project written and maintained by Daniel Buscombe. Bugs are expected - please report them, I will fix them quickly. Feedback and suggestions for improvements are <em>very</em> welcome</p>
<p>Please download, try, report bugs, fork, modify, evaluate, discuss, collaborate. Please use the ‘Issues’ tab in github <a class="reference external" href="https://github.com/dbuscombe-usgs/PyHum">here</a></p>
<p>Thanks for stopping by!</p>
</div>
<div class="section" id="trouble-shooting">
<span id="troubleshooting"></span><h2>Trouble Shooting<a class="headerlink" href="#trouble-shooting" title="Permalink to this headline">¶</a></h2>
<p>1. Problem: pyhum read hangs for a long time (several minutes) on the test script.
Try this: uninstall joblib and install an older version:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">uninstall</span> <span class="n">joblib</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">joblib</span><span class="o">==</span><span class="mf">0.7</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
<p>2. Problem: you get an “invalid mode or file name” error.
Try this: construct file paths using raw strings e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s1">r&#39;C:\Users\me\mydata\R0089&#39;</span>
</pre></div>
</div>
<p>or using os, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;C:\Users&#39;</span><span class="p">,</span><span class="s1">&#39;me&#39;</span><span class="p">,</span><span class="s1">&#39;mydata&#39;</span><span class="p">,</span><span class="s1">&#39;R0089&#39;</span><span class="p">))</span>
</pre></div>
</div>
<ol class="arabic" start="3">
<li><p class="first">Problem: on Linux, PyHum is using an older version of scipy than 0.16, as revealed by:</p>
<p>python -c ‘import scipy;print(scipy.__version__)’</p>
</li>
</ol>
<p>Try this: remove a system installed file e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">remove</span> <span class="n">python</span><span class="o">-</span><span class="n">scipy</span> <span class="c1">##(Debian based)</span>
<span class="n">yum</span> <span class="n">remove</span> <span class="n">scipy</span> <span class="c1">##(Fedora based)</span>
</pre></div>
</div>
<ol class="arabic" start="4">
<li><p class="first">Problem: do I have the latest version of PyHum installed? Check your version using this:</p>
<p>python -c ‘import PyHum;print(PyHum.__version__)’</p>
</li>
</ol>
<p>Check this against the latest <a class="reference external" href="https://github.com/dbuscombe-usgs/PyHum/blob/master/PyHum/__init__.py">bleeding-edge’ version `here</a> (line 47)</p>
<img alt="_images/pyhum_logo_colour_sm.png" src="_images/pyhum_logo_colour_sm.png" />
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pyhum_logo_white.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#about">About</a></li>
<li><a class="reference internal" href="#technical-info">Technical Info</a></li>
<li><a class="reference internal" href="#please-cite">Please Cite!</a></li>
<li><a class="reference internal" href="#credits">Credits</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#installation-on-amazon-linux-ec-2-instance">Installation on Amazon Linux EC-2 instance</a></li>
<li><a class="reference internal" href="#test">Test</a></li>
<li><a class="reference internal" href="#using-the-gui">Using the GUI</a></li>
<li><a class="reference internal" href="#gettingstarted">Getting Started</a></li>
<li><a class="reference internal" href="#support">Support</a></li>
<li><a class="reference internal" href="#trouble-shooting">Trouble Shooting</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">PyHum: Python program for reading and processing low-cost sidescan sonar data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">Modules</a></p>

    <hr/>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <hr/>
    <div>
	<h3>Mailing list</h3>
	<a href="https://github.com/dbuscombe-usgs/PyHum/">dbuscombe@usgs.gov</a>
    <p class="searchtip" style="font-size: 80%">
    Send an email to subscribe</p>
    </div>
<hr/>
<small><a href="_sources/README.rst.txt"
           rel="nofollow">Show this page source</a>
</small>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modules.html" title="Modules"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PyHum: Python program for reading and processing low-cost sidescan sonar data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyHum 1.4.3 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015 -- 2018, Daniel Buscombe.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>